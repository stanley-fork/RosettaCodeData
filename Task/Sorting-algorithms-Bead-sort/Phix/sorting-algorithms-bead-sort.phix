with javascript_semantics

function beadsort(sequence a)
    sequence poles = repeat(0,max(a))
    for k in a do
        poles[1..k] = sq_add(poles[1..k],1)
--or
--      for i,p in poles to k do
--          poles[i] = p+1
--      end for
    end for
    a[1..$] = 0
    for p in poles do
        a[-p..$] = sq_add(a[-p..$],1)
--or
--      for i,n in a from -p to -1 do
--          a[i] = n+1
--      end for
    end for
    return a
end function

?beadsort({5, 3, 1, 7, 4, 1, 1, 20})
